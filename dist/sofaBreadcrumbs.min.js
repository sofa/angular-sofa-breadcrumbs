/**
 * angular-sofa-breadcrumbs - v0.1.0 - Wed Feb 11 2015 13:04:21 GMT+0100 (CET)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(t){t.module("sofa-breadcrumbs.tpl.html",[]).run(["$templateCache",function(t){t.put("sofa-breadcrumbs.tpl.html",'<ul>\n    <li class="sofa-breadcrumbs__entry" \n        ng-repeat="entry in data">\n        <a ng-click="navigateTo(entry)" ng-bind="entry.title"></a>\n    </li>\n</ul>\n')}]),t.module("sofa.breadcrumbs",["sofa-breadcrumbs.tpl.html","sofa.urlParserService","sofa.urlConstructionService","sofa.couchService"]),t.module("sofa.breadcrumbs").directive("sofaBreadcrumbs",["$location","urlParserService","urlConstructionService","couchService",function(t,e,r,n){"use strict";return{restrict:"E",replace:!0,templateUrl:"sofa-breadcrumbs.tpl.html",scope:{data:"=?"},link:function(r){var a=function(t){var e=[],r=function(t){t.parent&&(e.unshift({title:t.label,link:t.getOriginFullUrl()}),r(t.parent))};return r(t),e},i=function(t){return t.unshift({title:"Startseite",link:"/"}),t};r.navigateTo=function(e){t.path(e.link)},r.$watch(function(){return t.path()},function(){if(!e.isRootCategory()||e.isView("categories")||e.isView("products")||e.isView("product")){var t=e.getCategoryUrlId();n.getCategory(t).then(function(t){var n=i(a(t));e.isView("products")&&n.pop(),r.data=n})}})}}}])}(angular);